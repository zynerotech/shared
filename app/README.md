# App Bootstrap Package

–ü–∞–∫–µ—Ç `app` –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏ –≥–∏–±–∫–∏–π —Å–ø–æ—Å–æ–± –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –æ–±—â–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–ª—è –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤. –¢–µ–ø–µ—Ä—å –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç **–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã** - –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –∞ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è –ø–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏.

## üöÄ –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ì–∏–±–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º–∏
- **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è** - —Ç–æ–ª—å–∫–æ –ª–æ–≥–≥–µ—Ä –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- **–í—ã–±–æ—Ä–æ—á–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ** –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ —á–µ—Ä–µ–∑ Builder –ø–∞—Ç—Ç–µ—Ä–Ω
- **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è–º–∏
- **–¢–∏–ø–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –Ω–∞ —ç—Ç–∞–ø–µ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏

### –ü–∞—Ç—Ç–µ—Ä–Ω Builder
- **Fluent API** –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω–∏—è
- **–¶–µ–ø–æ—á–∫–∞ –º–µ—Ç–æ–¥–æ–≤** –¥–ª—è –≤—ã–±–æ—Ä–æ—á–Ω–æ–≥–æ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** –Ω–∞ —ç—Ç–∞–ø–µ —Å–±–æ—Ä–∫–∏

## –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

–ü–∞–∫–µ—Ç –º–æ–∂–µ—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–≤—Å–µ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ, –∫—Ä–æ–º–µ Logger):
- **Logger** (–ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ) - **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç**
- Metrics (–º–µ—Ç—Ä–∏–∫–∏) - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π
- Healthcheck (–ø—Ä–æ–≤–µ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤—å—è) - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π
- Server (HTTP —Å–µ—Ä–≤–µ—Ä) - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π
- GRPC Server (gRPC —Å–µ—Ä–≤–µ—Ä) - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π
- Database (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö) - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π
- Cache (–∫—ç—à) - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π
- EventPublisher (–∏–∑–¥–∞—Ç–µ–ª—å —Å–æ–±—ã—Ç–∏–π) - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π

## üìã –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### ConfigProvider (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
```go
type ConfigProvider interface {
    Validate() error
    LoggerConfig() platformlogger.Config
}
```

### OptionalConfigProvider (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π)
```go
type OptionalConfigProvider interface {
    MetricsConfig() *platformmetrics.Config
    HealthcheckConfig() *platformhealthcheck.Config
    ServerConfig() *platformserver.Config
    DatabaseConfig() *platformdatabase.Config
    CacheConfig() *platformcache.Config
    KafkaConfig() *kafka.Config
    GRPCConfig() *platformgrpc.Config
}
```

**–í–∞–∂–Ω–æ**: –ú–µ—Ç–æ–¥—ã `OptionalConfigProvider` –¥–æ–ª–∂–Ω—ã –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å `nil`, –µ—Å–ª–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –Ω–µ –Ω—É–∂–µ–Ω.

## üéØ –°–ø–æ—Å–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### 1. –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (—Ç–æ–ª—å–∫–æ –ª–æ–≥–≥–µ—Ä)

```go
type Config struct {
    Logger platformlogger.Config `mapstructure:"logger"`
}

func (c Config) Validate() error { return nil }
func (c Config) LoggerConfig() platformlogger.Config { return c.Logger }

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
app, err := app.NewWithLogger(cfg)
if err != nil {
    log.Fatal(err)
}
defer app.Close()
```

### 2. –í—ã–±–æ—Ä–æ—á–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

```go
type Config struct {
    Logger    platformlogger.Config `mapstructure:"logger"`
    Metrics   *platformmetrics.Config `mapstructure:"metrics"`
    Database  *platformdatabase.Config `mapstructure:"database"`
}

func (c Config) Validate() error { return nil }
func (c Config) LoggerConfig() platformlogger.Config { return c.Logger }
func (c Config) MetricsConfig() *platformmetrics.Config { return c.Metrics }
func (c Config) DatabaseConfig() *platformdatabase.Config { return c.Database }

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Builder
app, err := app.NewBuilder(cfg).
    WithLogger().
    WithMetrics().
    WithDatabase().
    Build()
if err != nil {
    log.Fatal(err)
}
defer app.Close()
```

### 3. –í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (legacy –ø–æ–≤–µ–¥–µ–Ω–∏–µ)

```go
type Config struct {
    Logger      platformlogger.Config `mapstructure:"logger"`
    Metrics     platformmetrics.Config `mapstructure:"metrics"`
    Healthcheck platformhealthcheck.Config `mapstructure:"healthcheck"`
    Server      platformserver.Config `mapstructure:"server"`
    Database    platformdatabase.Config `mapstructure:"database"`
    Cache       platformcache.Config `mapstructure:"cache"`
    Kafka       kafka.Config `mapstructure:"kafka"`
    GRPC        platformgrpc.Config `mapstructure:"grpc"`
}

func (c Config) Validate() error { return nil }
func (c Config) LoggerConfig() platformlogger.Config { return c.Logger }
func (c Config) MetricsConfig() *platformmetrics.Config { return &c.Metrics }
func (c Config) HealthcheckConfig() *platformhealthcheck.Config { return &c.Healthcheck }
func (c Config) ServerConfig() *platformserver.Config { return &c.Server }
func (c Config) DatabaseConfig() *platformdatabase.Config { return &c.Database }
func (c Config) CacheConfig() *platformcache.Config { return &c.Cache }
func (c Config) KafkaConfig() *kafka.Config { return &c.Kafka }
func (c Config) GRPCConfig() *platformgrpc.Config { return &c.GRPC }

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
app, err := app.New(cfg)
if err != nil {
    log.Fatal(err)
}
defer app.Close()
```

### 4. –ó–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏–∑ —Ñ–∞–π–ª–∞

```go
// –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å –∑–∞–≥—Ä—É–∑–∫–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
app, err := app.BootstrapWithConfigAndLogger(cfg, "config.yaml")
if err != nil {
    log.Fatal(err)
}
defer app.Close()

// –ü–æ–ª–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å –∑–∞–≥—Ä—É–∑–∫–æ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
app, err := app.BootstrapWithConfig(cfg, "config.yaml")
if err != nil {
    log.Fatal(err)
}
defer app.Close()
```

## üîß Builder API

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –º–µ—Ç–æ–¥—ã
- `WithLogger()` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –ª–æ–≥–≥–µ—Ä (–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π)
- `WithMetrics()` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –º–µ—Ç—Ä–∏–∫–∏ (–µ—Å–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∞)
- `WithHealthcheck()` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç healthcheck (–µ—Å–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∞)
- `WithServer()` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç HTTP —Å–µ—Ä–≤–µ—Ä (–µ—Å–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∞)
- `WithDatabase()` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (–µ—Å–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∞)
- `WithCache()` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫—ç—à (–µ—Å–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∞)
- `WithKafka()` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç Kafka producer (–µ—Å–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∞)
- `WithGRPC()` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç gRPC —Å–µ—Ä–≤–µ—Ä (–µ—Å–ª–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–∞)
- `WithAll()` - –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `Build()` - —Å–æ–∑–¥–∞–µ—Ç —ç–∫–∑–µ–º–ø–ª—è—Ä App

### –ü—Ä–∏–º–µ—Ä —Ü–µ–ø–æ—á–∫–∏ –º–µ—Ç–æ–¥–æ–≤
```go
app, err := app.NewBuilder(cfg).
    WithLogger().
    WithMetrics().
    WithServer().
    WithDatabase().
    Build()
```

## üõ°Ô∏è –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

–í—Å–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ `App` –º–æ–≥—É—Ç –±—ã—Ç—å `nil`. –í—Å–µ–≥–¥–∞ –ø—Ä–æ–≤–µ—Ä—è–π—Ç–µ –∏—Ö –Ω–∞–ª–∏—á–∏–µ –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º:

```go
if app.Metrics != nil {
    // –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ—Ç—Ä–∏–∫
}

if app.Database != nil {
    // –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
}

if app.Server != nil {
    // –ó–∞–ø—É—Å–∫ HTTP —Å–µ—Ä–≤–µ—Ä–∞
}
```

## üìù –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ YAML

```yaml
# –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (—Ç–æ–ª—å–∫–æ –ª–æ–≥–≥–µ—Ä)
logger:
  level: info
  format: json
  output: stdout

# –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (–ø–æ–¥–∫–ª—é—á–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –Ω—É–∂–Ω—ã)
metrics:
  enabled: true
  path: /metrics
  port: 9090

database:
  host: localhost
  port: 5432
  user: postgres
  password: password
  dbname: myapp

server:
  address: :8080
  read_timeout: 30s
  write_timeout: 30s
```

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è —Å –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –≤–µ—Ä—Å–∏–π

–î–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –≤–æ–∑–≤—Ä–∞—â–∞–µ–º—ã–µ —Ç–∏–ø—ã –≤ –º–µ—Ç–æ–¥–∞—Ö –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏:

```go
// –ë—ã–ª–æ
func (c Config) MetricsConfig() platformmetrics.Config { return c.Metrics }

// –°—Ç–∞–ª–æ
func (c Config) MetricsConfig() *platformmetrics.Config { return &c.Metrics }
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –Ω–æ–≤—ã–π Builder API –¥–ª—è –±–æ–ª–µ–µ –≥–∏–±–∫–æ–≥–æ –∫–æ–Ω—Ç—Ä–æ–ª—è.

